<def tag="belongs-to-slide-editor-view" for="Story">
  <belongs-to-slide-editor-view merge>
    <a:>Edit</a:>
  </belongs-to-slide-editor-view>
</def>

<show-page>

  <heading:><editor:name/></heading:>
    
  <collection: replace>
    <table-plus with="&@stories" fields="this, tasks.count, status">
      <prepend-header:>
      <div class="filter">
        Display by status: <filter-menu param-name="status" options="&StoryStatus.all"/>
      </div>
      </prepend-header:>
      <tbody:>
        <repeat>
          <tr part="stories-row" id="row-#{typed_id}">
            <td><name/></td>
            <td><view:tasks.count/></td>
            <td><view:status/></td>
            <td class='controls'>
              <belongs-to-slide-editor>
                <form: update="row-#{typed_id}" />
              </belongs-to-slide-editor>
            </td>
          </tr >
        </repeat>
      </tbody:>
      <!-- HACK: force header for controls -->
      <controls: />  
      <empty-message:>No stories match your criteria</empty-message:>
    </table-plus>
  </collection: >
  
  
  <aside:>
    <h2>Project Members</h2>
    <collection:members part="members"/>

    <form:memberships.new update="members" reset-form refocus-form>
      <div>
        Add a member: 
        <name-one:user complete-target="&@project" completer="new_member_name"/>
      </div>
    </form>
	</aside:>
  
</show-page>


